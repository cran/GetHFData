<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Marcelo Perlin" />

<meta name="date" content="2016-10-14" />

<title>Downloading and aggregating high frequency trading data from Bovespa</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Downloading and aggregating high frequency trading data from Bovespa</h1>
<h4 class="author"><em>Marcelo Perlin</em></h4>
<h4 class="date"><em>2016-10-14</em></h4>



<p>Recently Bovespa, the Brazilian financial exchange company, has released the access to its internal <a href="ftp://ftp.bmf.com.br/">ftp site</a>. In this address one can find several information regarding the Brazilian financial system, including datasets with high frequency (tick by tick) trading data for three different markets: equity, options and BMF.</p>
<p>Downloading and processing these files, however, can be exausting. The dataset is composed of zip files with the whole trading data, separated by day and market. These files are huge in size and processing or aggregating them in a usefull manner requires specific knowledge for the structure of the dataset.</p>
<p>The package GetHFData make is easy to access this dataset directly by allowing the easy importation and aggregations of it. Based on this package the user can:</p>
<ul>
<li>Access the contents of the Bovespa ftp using function function <code>ghfd_get_ftp_contents</code></li>
<li>Get the list of available ticker in the trading data using <code>ghfd_get_available_tickers_from_ftp</code></li>
<li>Download individual files using <code>ghfd_download_file</code></li>
<li>Download and process a batch of dates and assets codes with <code>ghfd_get_HF_data</code></li>
</ul>
<p>In the next example we will only use a local file from the package. Given the size of the files in the ftp and the CHECK process of CRAN, it makes sense to keep this vignette compact and fast to run.</p>
<div id="reading-trading-data-from-local-file-1-date" class="section level2">
<h2>Reading trading data from local file (1 date)</h2>
<p>Lets assume you want high frequency trading data for options in a given date (2015-11-26). This file could be downloaded from the ftp using function <code>ghfd_download_file</code>, but it is already available locally within the package.</p>
<p>The first step is to check the available tickers in the zip file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(GetHFData)

out.file &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">'NEG_OPCOES_20151126.zip'</span>, <span class="dt">package =</span> <span class="st">&quot;GetHFData&quot;</span>)
df.tickers &lt;-<span class="st"> </span><span class="kw">ghfd_get_available_tickers_from_file</span>(out.file)
<span class="kw">print</span>(<span class="kw">head</span>(df.tickers)) <span class="co"># show only 10</span></code></pre></div>
<pre><code>##   tickers n.trades
## 1 PETRL80     2882
## 2  PETRL9      985
## 3 VALEL14      754
## 4 VALEL43      679
## 5 PETRL70      514
## 6 PETRX80      507
##                                                                                                    f.name
## 1 C:/Users/marce/AppData/Local/Temp/RtmpMlEKcl/Rinst2fa89603b26/GetHFData/extdata/NEG_OPCOES_20151126.zip
## 2 C:/Users/marce/AppData/Local/Temp/RtmpMlEKcl/Rinst2fa89603b26/GetHFData/extdata/NEG_OPCOES_20151126.zip
## 3 C:/Users/marce/AppData/Local/Temp/RtmpMlEKcl/Rinst2fa89603b26/GetHFData/extdata/NEG_OPCOES_20151126.zip
## 4 C:/Users/marce/AppData/Local/Temp/RtmpMlEKcl/Rinst2fa89603b26/GetHFData/extdata/NEG_OPCOES_20151126.zip
## 5 C:/Users/marce/AppData/Local/Temp/RtmpMlEKcl/Rinst2fa89603b26/GetHFData/extdata/NEG_OPCOES_20151126.zip
## 6 C:/Users/marce/AppData/Local/Temp/RtmpMlEKcl/Rinst2fa89603b26/GetHFData/extdata/NEG_OPCOES_20151126.zip</code></pre>
<p>In <code>df.tickers</code> one can find the symbols available in the file and also the number of trades for each. Now, lets take the 3 most traded instruments in that day and check the result of the import process:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my.assets &lt;-<span class="st"> </span>df.tickers$tickers[<span class="dv">1</span>:<span class="dv">3</span>] <span class="co"># ticker to find in zip file</span>

start.time &lt;-<span class="st"> '10:00:00'</span> <span class="co"># defines first time period of day</span>
last.time &lt;-<span class="st"> '17:00:00'</span>  <span class="co"># defines last time period of day</span>

my.df &lt;-<span class="st"> </span><span class="kw">ghfd_read_file</span>(out.file,
                        <span class="dt">my.assets =</span> my.assets,
                        <span class="dt">first.time =</span> <span class="st">'10:00:00'</span>,
                        <span class="dt">last.time =</span> <span class="st">'17:00:00'</span>,
                        <span class="dt">type.output =</span> <span class="st">'raw'</span>,
                        <span class="dt">agg.diff =</span> <span class="st">'15 min'</span>)</code></pre></div>
<pre><code>##  - Imported  18301 lines, 770 unique tickers
##    -&gt; Processing file</code></pre>
<pre><code>## Warning in stri_detect_regex(string, pattern, opts_regex = opts(pattern)):
## longer object length is not a multiple of shorter object length</code></pre>
<pre><code>##  - Found 1599 lines for 6 selected tickers</code></pre>
<p>Let’s see the first part of the imported dataframe.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(my.df)</code></pre></div>
<pre><code>## # A tibble: 6 × 10
##   SessionDate InstrumentSymbol TradePrice TradedQuantity    Tradetime
##        &lt;date&gt;            &lt;chr&gt;      &lt;dbl&gt;          &lt;dbl&gt;        &lt;chr&gt;
## 1  2015-11-26          PETRL80       0.44          11300 10:00:28.451
## 2  2015-11-26          PETRL80       0.45           5000 10:00:36.274
## 3  2015-11-26          PETRL80       0.44           1000 10:01:38.228
## 4  2015-11-26          PETRL80       0.44           2000 10:02:40.536
## 5  2015-11-26          PETRL80       0.43           2000 10:03:32.105
## 6  2015-11-26          PETRL80       0.43           1300 10:04:10.136
## # ... with 5 more variables: CrossTradeIndicator &lt;int&gt;, BuyMember &lt;dbl&gt;,
## #   SellMember &lt;dbl&gt;, TradeDateTime &lt;dttm&gt;, TradeSign &lt;dbl&gt;</code></pre>
<p>The columns names are self explanatory:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(my.df)</code></pre></div>
<pre><code>##  [1] &quot;SessionDate&quot;         &quot;InstrumentSymbol&quot;    &quot;TradePrice&quot;         
##  [4] &quot;TradedQuantity&quot;      &quot;Tradetime&quot;           &quot;CrossTradeIndicator&quot;
##  [7] &quot;BuyMember&quot;           &quot;SellMember&quot;          &quot;TradeDateTime&quot;      
## [10] &quot;TradeSign&quot;</code></pre>
<p>Now lets plot the prices of all instruments:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
 
p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(my.df, <span class="kw">aes</span>(<span class="dt">x =</span> TradeDateTime, <span class="dt">y =</span> TradePrice, <span class="dt">color =</span> InstrumentSymbol))
p &lt;-<span class="st">  </span>p +<span class="st"> </span><span class="kw">geom_line</span>()
<span class="kw">print</span>(p)</code></pre></div>
<p><img src="data:image/png;base64,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" alt /><!-- --></p>
<p>As we can see, this was a fairly stable day for the price of these option contracts.</p>
</div>
<div id="downloading-and-reading-trading-data-for-several-dates" class="section level2">
<h2>Downloading and reading trading data for several dates</h2>
<p>In the last example we only used one date. The package GetHDData also allows for a batch download and processing of files using starting and ending dates. In this vignette we are not running the code given the large size of the downloaded files. You should try the next example in your own computer (just copy, paste and run the code in R).</p>
<p>In this example we will download files from the ftp for <em>PETR4</em>, an equity contract traded in Bovespa. The data will be processed, resulting in financial data aggregated by 15 minutes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(GetHFData)

first.time &lt;-<span class="st"> '11:00:00'</span>
last.time &lt;-<span class="st"> '17:00:00'</span>

first.date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">'2015-11-01'</span>)
last.date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">'2015-11-10'</span>)
type.output &lt;-<span class="st"> 'agg'</span>
agg.diff &lt;-<span class="st"> '15 min'</span>

my.assets &lt;-<span class="st"> 'PETR4'</span>
type.market =<span class="st"> 'equity'</span>

df.out &lt;-<span class="st"> </span><span class="kw">ghfd_get_HF_data</span>(<span class="dt">my.assets =</span>my.assets,
                           <span class="dt">type.market =</span> type.market,
                           <span class="dt">first.date =</span> first.date,
                           <span class="dt">last.date =</span> last.date,
                           <span class="dt">first.time =</span> first.time,
                           <span class="dt">last.time =</span> last.time,
                           <span class="dt">type.output =</span> type.output,
                           <span class="dt">agg.diff =</span> agg.diff)</code></pre></div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
